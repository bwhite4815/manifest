/*! manifest 2013-12-26 */
function Gallery(a){nameOfGallery=a,null!=nameOfGallery&&null!=localStorage.getItem(nameOfGallery)&&this.setFavorites(JSON.parse(localStorage.getItem(nameOfGallery)))}var nameOfGallery="",favorites=[];Gallery.prototype.getFavorites=function(){return console.log("get favorites: "+favorites),favorites},Gallery.prototype.setFavorites=function(a){favorites=a,console.log("set favorites: "+favorites)},Gallery.prototype.clearFavorites=function(){favorites=[],console.log("clear favorites: "+favorites)},Gallery.prototype.saveFavorites=function(){null!=nameOfGallery&&localStorage.setItem(nameOfGallery,JSON.stringify(favorites)),console.log("save favorites: "+favorites)},Gallery.prototype.addFavorite=function(a){console.log("add favorite: "+favorites),this.inFavorites(a)&&this.removeFavorite(a),favorites.push(a),console.log("add favorite: "+favorites)},Gallery.prototype.removeFavorite=function(a){favorites=$.grep(favorites,function(b){return b!=a}),console.log("remove "+a+" from favorite: "+favorites)},Gallery.prototype.toggleFavorite=function(a){console.log("toggle favorite: "+favorites),this.inFavorites(a)?this.removeFavorite(a):this.addFavorite(a)},Gallery.prototype.inFavorites=function(a){return console.log("is "+a+" in favorites: "+favorites+"?"),$.inArray(a,favorites)>=0?(console.log("yep"),!0):(console.log("nope"),!1)};var gall=new Gallery("thing-1");$(function(){function a(){var a=$("#scroller-wrapper").width(),b=$("#scroller-wrapper .thelist li").size(),c=a*b;console.log("Resize main scroller to "+c),console.log("Resize main scroller items to "+a),$("#scroller").css("width",c),$("#scroller-wrapper li").css("width",a);var d=150,e=$("#thumb-scroller-wrapper .thelist li").size();console.log("elements in nav carousel "+e);var f=e*d;console.log("Resize nav scroller to "+f),console.log("Nav scroller thumbs are "+d),$("#thumb-scroller").css("width",f),$("#thumb-scroller-wrapper li").css("width",d)}var b=$("#favorite-btn");Hammer(b).on("tap",function(a){var b=$("#thumb-scroller-wrapper a.active img").attr("id").split("-").pop();console.log(a.target),gall.toggleFavorite(b-1),gall.saveFavorites(),$("#favorite-btn").toggleClass("favorited")}),b.click(function(){return!1});var c=$("#fullscreen-btn");console.log("Screenfull Supported/allowed: "+!!screenfull.enabled),screenfull.enabled||c.hide(),Hammer(c).on("tap",function(){var a=$("#thumb-scroller-wrapper a.active img").attr("id").split("-").pop()-1;console.log("fullscreen item "+a+": "+$(".thelist li:eq("+a+") img")[0].src),screenfull.request($(".thelist li:eq("+a+") img")[0])}),c.click(function(){return!1}),a(),$(window).bind("resize",a)}),$(window).load(function(){function a(){c=new iScroll("scroller-wrapper",{snap:!0,momentum:!1,hScrollbar:!1,onScrollEnd:function(){console.log("current page: "+this.currPageX),$("#thumb-scroller-wrapper a.active").removeClass("active");var a=Math.floor(this.currPageX)+1;$("#thumb-scroller-wrapper li:nth-child("+a+") a").addClass("active"),b(a-1)}}),d=new iScroll("thumb-scroller-wrapper",{snap:!0,momentum:!1,hScrollbar:!1,onScrollEnd:function(){console.log("current page: "+this.currPageX)}})}function b(a){gall.inFavorites(a)?$("#favorite-btn").addClass("favorited"):$("#favorite-btn").removeClass("favorited")}var c,d;a(),b(0);var e=$("#thumb-scroller-wrapper a");Hammer(e).on("tap",function(a){var b=a.target.id.split("-").pop();c.scrollToPage(b-1,0,200),$("#thumb-scroller-wrapper a.active").removeClass("active");var d=Math.floor(b);$("#thumb-scroller-wrapper li:nth-child("+d+") a").addClass("active")}),e.click(function(){return!1})});